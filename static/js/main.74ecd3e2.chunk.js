(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(64)},40:function(e,t,a){},44:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),c=a.n(o),i=a(5),l=a(66),s=a(13),u=a(27),h=a(16),p={allPhotos:[],filteredPhotos:[],author:"",selectedPhoto:null,pageSize:12,pageSizeOptions:[12,24,48,"all"],currentPage:1},f=Object(s.c)({photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PHOTOS":return Object(h.a)({},e,{allPhotos:t.payload,filteredPhotos:t.payload});case"AUTHOR_TYPED":var a=t.payload,n=a?e.allPhotos.filter(function(e){return e.author.toLowerCase().includes(a.toLowerCase())}):e.allPhotos;return Object(h.a)({},e,{author:a,filteredPhotos:n});case"PHOTO_SELECTED":return Object(h.a)({},e,{selectedPhoto:t.payload});case"PAGE_CHANGED":return Object(h.a)({},e,{currentPage:t.payload});case"PAGE_SIZE_CHANGED":console.log("payload: ",t.payload);var r="all"===t.payload?e.filteredPhotos.length:Number(t.payload);return Object(h.a)({},e,{pageSize:r});default:return e}}}),d=[u.a],g=Object(s.d)(f,{},s.a.apply(void 0,d)),m=(a(40),a(6)),v=a(7),P=a(9),E=a(8),y=a(10),b=a(69),O=a(68),j=a(67),N=(a(42),a(44),a(11)),w=a.n(N),S=a(15),k=function(){return function(e){fetch("https://picsum.photos/list").then(function(e){return e.json()}).then(function(t){return e({type:"FETCH_PHOTOS",payload:t.slice(10,200)})}).catch(function(e){return console.log(e)})}},C=function(e){return{type:"AUTHOR_TYPED",payload:e}},A=function(e){return{type:"PHOTO_SELECTED",payload:e}},z=function(e){return{type:"PAGE_CHANGED",payload:e}},I=a(17),x=a.n(I),T=(a(49),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(P.a)(this,Object(E.a)(t).call(this,e))).getDataList=function(){var e=[];return a.props.photos.map(function(t){return e.push(t.author)}),e=x.a.uniq(e),r.a.createElement("datalist",{id:"authors datalist"},e.map(function(e){return r.a.createElement("option",{key:e,value:e})}))},a.handleAuthorChange=function(e){a.props.onAuthorTyped(e.currentTarget.value),a.props.setPageSize(a.pageSizeSelect.current.value)},a.pageSizeSelect=r.a.createRef(),a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=Object(S.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.setCurrentPage(1);case 2:this.props.history.push("/page/1");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"filter-nav-bar"},this.getDataList(),r.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}),r.a.createElement("input",{className:"input-author",type:"text",placeholder:"author...",list:"authors datalist",defaultValue:this.props.author,onChange:function(t){return e.handleAuthorChange(t)}}),r.a.createElement("div",{className:"page-size-select"},r.a.createElement("span",null,"view "),r.a.createElement("select",{ref:this.pageSizeSelect,onChange:function(t){return e.props.setPageSize(t.currentTarget.value)}},this.props.options.map(function(e){return r.a.createElement("option",{key:e},e)}))))}}]),t}(n.Component)),_=Object(i.b)(function(e){return{photos:e.photos.filteredPhotos,author:e.photos.author,pageSize:e.photos.pageSize,options:e.photos.pageSizeOptions}},{onAuthorTyped:C,setCurrentPage:z,setPageSize:function(e){return{type:"PAGE_SIZE_CHANGED",payload:e}}})(T),D=a(29),H=(a(51),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(P.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).getPages=function(){var e=a.props,t=e.count,n=e.pageSize,r=Math.ceil(t/n);return x.a.range(1,r+1)},a.styleActivePage=function(){var e=Object(D.a)(document.querySelectorAll(".pagination ul li"));e.forEach(function(e){return e.setAttribute("class","")}),e[a.props.currentPage].setAttribute("class","active")},a.handlePrev=function(){var e=a.props.currentPage-1>0?a.props.currentPage-1:1;a.changePage(e)},a.handleNext=function(){var e=a.getPages().length,t=a.props.currentPage+1<e?a.props.currentPage+1:e;a.changePage(t)},a.changePage=function(){var e=Object(S.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.history.push("/page/".concat(t)),e.next=3,a.props.setCurrentPage(t);case 3:a.styleActivePage();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.getPages();return t.length&&!t.includes(this.props.currentPage)?r.a.createElement(j.a,{to:"/pageNotFound"}):r.a.createElement("div",{className:"pagination"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:this.handlePrev},r.a.createElement("i",{className:"fa fa-arrow-left","aria-hidden":"true"})),t.map(function(t){return r.a.createElement("li",{key:t,onClick:function(){return e.changePage(t)}},t)}),r.a.createElement("li",{onClick:this.handleNext},r.a.createElement("i",{className:"fa fa-arrow-right","aria-hidden":"true"}))))}}]),t}(n.Component)),L=Object(i.b)(function(e){return{count:e.photos.filteredPhotos.length,pageSize:e.photos.pageSize,currentPage:e.photos.currentPage}},{setCurrentPage:z})(H),G=(a(54),a(65)),R=a(30),F=function(e){var t=e.width,a=e.height,n=e.id,o=e.alt,c=void 0===o?"Photo #".concat(n):o,i=Object(R.a)(e,["width","height","id","alt"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",Object.assign({src:"https://picsum.photos/\n        ".concat(t,"/\n        ").concat(a,"\n        ?image=").concat(n),alt:c},i)))},K=(a(56),Object(i.b)(null,{onPhotoSelected:A})(function(e){var t=e.photo,a=r.a.createRef(),n=r.a.createRef();return r.a.createElement("div",{className:"photo-container-div"},r.a.createElement("div",{className:"photo-div"},r.a.createElement(G.a,{to:"/photo/".concat(t.id)},r.a.createElement("div",{className:"zoom-icon-div",onClick:function(){return e.onPhotoSelected(t)}},r.a.createElement("i",{className:"fa fa-search-plus","aria-hidden":"true"})),r.a.createElement("div",{className:"image-div"},r.a.createElement(F,{width:e.width,height:e.height,id:t.id,alt:t.post_url,onLoad:function(){a.current.style.display="none",n.current.style.opacity="1"}})),r.a.createElement("div",{className:"load-icon-div",ref:a},r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"})))),r.a.createElement("div",{className:"author-div"},r.a.createElement("a",{href:t.author_url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("p",{ref:n,className:"photo-author"},t.author))))})),M=(a(58),function(){return r.a.createElement("footer",null,r.a.createElement("span",null,"Photos API: "),r.a.createElement("a",{href:"https://picsum.photos/",target:"_blank",rel:"noopener noreferrer"},"Lorem Picsum"))}),W=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(P.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).getPage=function(){return Number(a.props.match.params.number)},a.getPhotosOnPage=function(){var e=a.getPage(),t=a.props.pageSize*(e-1),n=a.props.pageSize*e;return a.props.photos.slice(t,n)},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){this.props.currentPage!==this.getPage()&&this.props.setCurrentPage(this.getPage())}},{key:"componentDidMount",value:function(){var e=Object(S.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.allPhotos.length){e.next=3;break}return e.next=3,this.props.fetchPhotos();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.getPhotosOnPage();return r.a.createElement("div",{className:"container"},r.a.createElement(_,{history:this.props.history}),r.a.createElement("div",{className:"gallery"},e.map(function(e){return r.a.createElement(K,{key:e.id,photo:e,width:"300",height:"300"})})),r.a.createElement(L,{history:this.props.history}),r.a.createElement(M,null))}}]),t}(n.Component),B=Object(i.b)(function(e){return{photos:e.photos.filteredPhotos,allPhotos:e.photos.filteredPhotos,pageSize:e.photos.pageSize,currentPage:e.photos.currentPage}},{fetchPhotos:k,onPhotoSelected:A,setCurrentPage:z})(W),U=a(28),q=a.n(U),J=function(e){var t=e.path,a=e.className;return r.a.createElement(G.a,{to:t},r.a.createElement("i",{className:a,"aria-hidden":"true"}))},Y=(a(60),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(P.a)(this,Object(E.a)(t).call(this,e))).getPhoto=function(){var e=a.getId(),t=a.props,n=t.photos,o=t.selectedPhoto;if(o&&e===o.id)return r.a.createElement(F,{width:o.width,height:o.height,id:e,alt:o.post_url,onLoad:function(){a.loadingIcon.current.style.display="none"}});var c=n?n.find(function(t){return t.id===e}):null;return c?r.a.createElement(F,{width:c.width,height:c.height,id:e,alt:c.post_url,onLoad:function(){a.loadingIcon.current.style.display="none"}}):n.length?r.a.createElement(j.a,{to:"/pageNotFound"}):null},a.getId=function(){return Number(a.props.match.params.id)},a.getNextId=function(e){var t=a.props.photos;try{var n=t.findIndex(function(t){return t.id===e});return t[n+1].id}catch(r){return null}},a.getPrevId=function(e){var t=a.props.photos;try{var n=t.findIndex(function(t){return t.id===e});return t[n-1].id}catch(r){return null}},a.handleKey=function(e){var t=a.getId();switch(e){case"left":var n=a.getPrevId(t);n&&a.props.history.push("/photo/".concat(n));break;case"right":var r=a.getNextId(t);r&&a.props.history.push("/photo/".concat(r));break;default:return}},a.loadingIcon=r.a.createRef(),a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.photos.length||this.props.fetchPhotos()}},{key:"render",value:function(){var e=this,t=this.getId(),a=this.getNextId(t),n=this.getPrevId(t);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{handleKeys:["left","right"],onKeyEvent:function(t){return e.handleKey(t)}}),r.a.createElement("div",{className:"selected-photo"},r.a.createElement("div",null,r.a.createElement(J,{path:"/page/".concat(this.props.currentPage),className:"fa fa-long-arrow-left"}),n?r.a.createElement(J,{path:"/photo/".concat(n),className:"fa fa-angle-left"}):r.a.createElement("i",null)),r.a.createElement("i",{ref:this.loadingIcon,className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),this.getPhoto(),a?r.a.createElement(J,{path:"/photo/".concat(a),className:"fa fa-angle-right"}):r.a.createElement("i",null)))}}]),t}(n.Component)),Z=Object(i.b)(function(e){return{photos:e.photos.allPhotos,selectedPhoto:e.photos.selectedPhoto,currentPage:e.photos.currentPage}},{fetchPhotos:k})(Y),V=(a(62),Object(i.b)(function(e){return{currentPage:e.photos.currentPage}},{onAuthorTyped:C})(function(e){var t=e.currentPage,a=e.onAuthorTyped;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Page not found."),r.a.createElement("h4",null,"Sorry, page with given URL doesn't exist."),r.a.createElement(G.a,{to:"/page/".concat(t),onClick:function(){return a("")}},r.a.createElement("div",{className:"to-gallery-div"},r.a.createElement("i",{className:"fa fa-long-arrow-left","aria-hidden":"true"}),r.a.createElement("p",null,"Back to gallery"))))})),$=function(e){function t(){return Object(m.a)(this,t),Object(P.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(O.a,{path:"/photo/:id",component:Z}),r.a.createElement(O.a,{path:"/page/:number",component:B}),r.a.createElement(O.a,{path:"/pageNotFound",component:V}),r.a.createElement(O.a,{path:"/",render:function(){return r.a.createElement(j.a,{to:"/page/1"})}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,{store:g},r.a.createElement(l.a,{basename:"/photo-gallery-app"},r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.74ecd3e2.chunk.js.map